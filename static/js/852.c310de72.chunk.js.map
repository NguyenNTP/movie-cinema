{"version":3,"file":"static/js/852.c310de72.chunk.js","mappings":"2NA2OA,MAtOA,SAAkBA,GAEd,OAAgCC,EAAAA,EAAAA,UAAS,MAAK,eAAvCC,EAAQ,KAAEC,EAAW,KAC5B,GAAgCF,EAAAA,EAAAA,UAAS,IAAG,eAArCG,EAAQ,KAAEC,EAAW,KAC5B,GAA+BJ,EAAAA,EAAAA,UAAS,IAAG,eAApCK,EAAM,KAAEC,EAAY,KAC3B,GAAwCN,EAAAA,EAAAA,UAAS,IAAG,eAA7CO,EAAY,KAAEC,EAAe,KAE9BC,EAAgB,GAEtB,GAAsCT,EAAAA,EAAAA,UAAS,GAAE,eAA1CU,EAAW,KAAEC,EAAc,KAClC,GAAuBC,EAAAA,EAAAA,MACjBC,GADkC,YAArB,GACYC,IAAI,aAC7BC,EAAOC,aAAaC,QAAQ,QAClC,GAAsCjB,EAAAA,EAAAA,UAAS,IAAG,eAA9BkB,GAAF,KAAgB,OAGlCC,EAAAA,EAAAA,YAAU,WACNC,MAAM,8FACDC,MAAK,SAAAC,GAAG,OAAIA,EAAIC,MAAM,IACtBF,MAAK,SAAAG,GACFtB,EAAYsB,EAAKC,SAASC,eAAeC,MAC7C,IAGJ,IAAIC,EAAMC,OAAOC,OAAO/B,EAAMgC,WAC1BC,EAAM,EACVJ,EAAIK,SAAQ,SAAAC,GACRF,GAAYE,CAChB,IACAvB,EAAeqB,EAAMjC,EAAMoC,cAE3Bf,MAAM,gGAAD,OAAiGP,IACjGQ,MAAK,SAAAC,GAAG,OAAIA,EAAIC,MAAM,IACtBF,MAAK,SAAAG,GAAI,OAAIhB,EAAgBgB,EAAK,GAG3C,GAAG,IAMH,IAAMY,EAAa,SAACC,EAASC,GAEL,IAAhB5B,IACAM,aAAauB,WAAW,QAEnBpC,EAASqC,SAASH,EAAUC,KAEzBnC,EAASsC,OAAS/B,GAMlBP,EAASuC,QALTtC,EAAY,GAAD,eACJD,GAAQ,CACXkC,EAAUC,MAW9B,EAGMK,EAAmB,SAACN,EAASC,GACJ,IAAvBvC,EAAMoC,eACNnB,aAAauB,WAAW,QACnBlC,EAAOmC,SAASH,EAAUC,KACvBjC,EAAOoC,OAA8B,EAArB1C,EAAMoC,eAgBtB9B,EAAOqC,QACPrC,EAAOqC,SAdHpC,EAAa,GAAD,eACLD,GAFPiC,EAAW,IAAM,EAEJ,CACTD,EAAUC,EACVD,GAAWC,EAAW,IAIb,CACTD,EAAUC,EACVD,GAAsB,EAAXC,EAAe,OAsBlD,EAuBA,OArBAvC,EAAM6C,eAAe,kBAAIzC,IAAQ,OAAKE,IAAQwC,KAAK,OAG/CtC,GACAA,EAAauC,KAAI,SAAAC,GACbtC,EAAcuC,KAAI,MAAlBvC,GAAa,OAASsC,EAAEE,SAASC,MAAM,OAC3C,KAGJ/B,EAAAA,EAAAA,YAAU,WACDJ,GACDC,aAAamC,QAAQ,OAAQ,kBAAIhD,IAAQ,OAAKE,IAAQwC,KAAK,OAC/D3B,EAAe,GAAD,eAAKf,IAAQ,OAAKE,KAC5BU,GACAG,EAAeH,EAAKmC,MAAM,KAGlC,GAAG,CAAC/C,EAAUE,IAEd+C,QAAQC,IAAI5C,IAGR,iBAAK6C,UAAU,YAAW,WACtB,gBAAIA,UAAU,QAAO,iCAAY,kBAAInD,IAAQ,OAAKE,IAAQwC,KAAK,MAAK,OAEhE5C,IAAY,iBAAKqD,UAAU,aAAY,WACnC,SAAC,IAAG,CAACA,UAAU,cAAa,UACxB,SAAC,IAAG,CAACC,KAAM,GAAG,SAENtD,EAAS,GAAGuD,KAAKV,KAAI,SAAAW,GACjB,GAAIA,EAAIC,aACJ,OAAO,UAAC,IAAG,CAACJ,UAAU,mBAAkB,WACpC,SAAC,IAAG,CAACA,UAAU,WAAU,SAAEG,EAAIC,gBAC/B,SAAC,IAAG,WACA,SAAC,IAAG,UAEID,EAAIE,MAAMb,KAAI,SAAA/B,GACV,OAAIN,EAAc+B,SAAUiB,EAAIC,aAAe3C,EAAK6C,KACzC,SAAC,IAAG,CACPN,UAAU,iBACVM,GAAIH,EAAIC,aAAe3C,EAAK6C,GAAG,SAAE7C,EAAK6C,KAG1CvD,EAAOmC,SAASiB,EAAIC,aAAe3C,EAAK6C,KACjC,SAAC,IAAG,CACPC,QAAS,kBAAMlB,EAAiBc,EAAIC,aAAc3C,EAAK6C,GAAG,EAC1DN,UAAU,cAAa,SAAEvC,EAAK6C,MAE3B,SAAC,IAAG,CACPC,QAAS,kBAAMlB,EAAiBc,EAAIC,aAAc3C,EAAK6C,GAAG,EAC1DN,UAAU,YAAW,SAAEvC,EAAK6C,IAExC,SAIZ,SAAC,IAAG,CAACN,UAAU,WAAU,SAAEG,EAAIC,iBAE3C,SAIZ,SAAC,IAAG,CAACJ,UAAU,QAAO,UAClB,SAAC,IAAG,CAACC,KAAM,GAAG,SAENtD,EAAS,GAAGuD,KAAKV,KAAI,SAAAW,GACjB,GAAIA,EAAIC,aACJ,OAAO,UAAC,IAAG,CAACJ,UAAU,mBAAkB,WACpC,SAAC,IAAG,CAACA,UAAU,WAAU,SAAEG,EAAIC,gBAC/B,SAAC,IAAG,WACA,SAAC,IAAG,UAEID,EAAIE,MAAMb,KAAI,SAAA/B,GAEV,OAAIN,EAAc+B,SAASiB,EAAIC,aAAe3C,EAAK6C,KACxC,SAAC,IAAG,CACPN,UAAU,iBACVM,GAAIH,EAAIC,aAAe3C,EAAK6C,GAAG,SAAE7C,EAAK6C,KAG1CzD,EAASqC,SAASiB,EAAIC,aAAe3C,EAAK6C,KACnC,SAAC,IAAG,CACPC,QAAS,kBAAMzB,EAAWqB,EAAIC,aAAc3C,EAAK6C,GAAG,EACpDN,UAAU,cACVM,GAAIH,EAAIC,aAAe3C,EAAK6C,GAAG,SAAE7C,EAAK6C,MAClC,SAAC,IAAG,CACZC,QAAS,kBAAMzB,EAAWqB,EAAIC,aAAc3C,EAAK6C,GAAG,EACpDN,UAAU,YACVM,GAAIH,EAAIC,aAAe3C,EAAK6C,GAAG,SAAE7C,EAAK6C,IAE9C,SAIZ,SAAC,IAAG,CAACN,UAAU,WAAU,SAAEG,EAAIC,iBAE3C,SAIZ,iBAAKJ,UAAU,eAAc,WACzB,gBAAKA,UAAU,oBAAmB,6BAClC,gBAAKA,UAAU,iBAAgB,UAC3B,gBAAKA,UAAU,sBAGvB,iBAAKA,UAAU,4BAA2B,WACtC,eAAGA,UAAU,QAAO,WAChB,iBAAMA,UAAU,cAAkB,+DAEtC,eAAGA,UAAU,QAAO,WAChB,iBAAMA,UAAU,YAAgB,qEAEpC,0BACI,iBAAMA,UAAU,aAAiB,4EAQ7D,C","sources":["Components/Book-Seat/Book-seat.js"],"sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport {useSearchParams} from \"react-router-dom\"\r\nimport \"./Book-seat.scss\"\r\nimport {Col, Row} from \"antd\";\r\n\r\nfunction BookSeat(props) {\r\n\r\n    const [seatData, setSeatData] = useState(null)\r\n    const [selectId, setSelectId] = useState([])\r\n    const [cpSeat, selectCpSeat] = useState([])\r\n    const [lsTicketPick, getLsTicketPick] = useState([])\r\n\r\n    const arrTicketPick = []\r\n    //Tong so ve don\r\n    const [totalTicket, getTotalTicket] = useState(0)\r\n    const [searchParams] = useSearchParams()\r\n    const sessionId = searchParams.get(\"sessionId\")\r\n    const seat = localStorage.getItem(\"seat\")\r\n    const [seatPicking, setSeatPicking] = useState([])\r\n\r\n\r\n    useEffect(() => {\r\n        fetch(\"https://vietcpq.name.vn/U2FsdGVkX19udsrsAUnUBsRg8K4HmweHVb4TTgSilDI=/cinema/booking/detail\")\r\n            .then(res => res.json())\r\n            .then(data => {\r\n                setSeatData(data.seatPlan.seatLayoutData.areas)\r\n            })\r\n\r\n        //Tinh tong so ve don\r\n        let tmp = Object.values(props.sumTicket)\r\n        let sum = 0\r\n        tmp.forEach(item => {\r\n            sum = sum + item\r\n        })\r\n        getTotalTicket(sum - props.coupleTicket)\r\n\r\n        fetch(`https://vietcpq.name.vn/U2FsdGVkX19udsrsAUnUBsRg8K4HmweHVb4TTgSilDI=/cinema/TicketByShowCode/${sessionId}`)\r\n            .then(res => res.json())\r\n            .then(data => getLsTicketPick(data))\r\n\r\n\r\n    }, [])\r\n\r\n    /*\r\n        console.log(seatPicking)\r\n    */\r\n\r\n    const handleSeat = (rowName, seatName) => {\r\n\r\n        if (totalTicket !== 0) {\r\n            localStorage.removeItem(\"seat\");\r\n\r\n            if (!selectId.includes(rowName + seatName)) {\r\n\r\n                if (selectId.length < totalTicket) {\r\n                    setSelectId([\r\n                        ...selectId,\r\n                        rowName + seatName\r\n                    ])\r\n                } else {\r\n                    selectId.shift()\r\n                    setSelectId([\r\n                        ...selectId,\r\n                        rowName + seatName\r\n                    ])\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    const handleSeatCouple = (rowName, seatName) => {\r\n        if (props.coupleTicket !== 0) {\r\n            localStorage.removeItem(\"seat\");\r\n            if (!cpSeat.includes(rowName + seatName)) {\r\n                if (cpSeat.length < props.coupleTicket * 2) {\r\n\r\n                    if (seatName % 2 === 0) {\r\n                        selectCpSeat([\r\n                            ...cpSeat,\r\n                            rowName + seatName,\r\n                            rowName + (seatName - 1),\r\n                        ])\r\n                    } else {\r\n                        selectCpSeat([\r\n                            ...cpSeat,\r\n                            rowName + seatName,\r\n                            rowName + (seatName * 1 + 1),\r\n                        ])\r\n                    }\r\n                } else {\r\n                    cpSeat.shift()\r\n                    cpSeat.shift()\r\n                    if (seatName % 2 === 0) {\r\n                        selectCpSeat([\r\n                            ...cpSeat,\r\n                            rowName + seatName,\r\n                            rowName + (seatName - 1),\r\n                        ])\r\n                    } else {\r\n                        selectCpSeat([\r\n                            ...cpSeat,\r\n                            rowName + seatName,\r\n                            rowName + (seatName * 1 + 1),\r\n                        ])\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    props.parentCallback([...selectId, ...cpSeat].join(', '))\r\n\r\n\r\n    if (lsTicketPick)\r\n        lsTicketPick.map(n => {\r\n            arrTicketPick.push(...n.SeatCode.split(', '))\r\n        })\r\n\r\n\r\n    useEffect(() => {\r\n        if (!seat)\r\n            localStorage.setItem(\"seat\", [...selectId, ...cpSeat].join(', '))\r\n        setSeatPicking([...selectId, ...cpSeat])\r\n        if (seat) {\r\n            setSeatPicking(seat.split(\",\"))\r\n        }\r\n\r\n    }, [selectId, cpSeat])\r\n\r\n    console.log(arrTicketPick)\r\n\r\n    return (\r\n        <div className=\"book-seat\">\r\n            <h2 className=\"pb-10\">CHỌN GHẾ: {[...selectId, ...cpSeat].join(', ')} </h2>\r\n            {\r\n                seatData && <div className=\"block-seat\">\r\n                    <Row className=\"w-100 mb-20\">\r\n                        <Col span={24}>\r\n                            {\r\n                                seatData[1].rows.map(row => {\r\n                                    if (row.physicalName)\r\n                                        return <Row className=\"fl fl-spw fl-mid\">\r\n                                            <Col className=\"name-row\">{row.physicalName}</Col>\r\n                                            <Col>\r\n                                                <Row>\r\n                                                    {\r\n                                                        row.seats.map(seat => {\r\n                                                            if (arrTicketPick.includes((row.physicalName + seat.id))) {\r\n                                                                return <Col\r\n                                                                    className=\"cant-pick-seat\"\r\n                                                                    id={row.physicalName + seat.id}>{seat.id}</Col>\r\n                                                            }\r\n\r\n                                                            if (cpSeat.includes(row.physicalName + seat.id))\r\n                                                                return <Col\r\n                                                                    onClick={() => handleSeatCouple(row.physicalName, seat.id)}\r\n                                                                    className=\"picked-seat\">{seat.id}</Col>\r\n                                                            else {\r\n                                                                return <Col\r\n                                                                    onClick={() => handleSeatCouple(row.physicalName, seat.id)}\r\n                                                                    className=\"name-seat\">{seat.id}</Col>\r\n                                                            }\r\n                                                        })\r\n                                                    }\r\n                                                </Row>\r\n                                            </Col>\r\n                                            <Col className=\"name-row\">{row.physicalName}</Col>\r\n                                        </Row>\r\n                                })\r\n                            }\r\n                        </Col>\r\n                    </Row>\r\n                    <Row className=\"w-100\">\r\n                        <Col span={24}>\r\n                            {\r\n                                seatData[0].rows.map(row => {\r\n                                    if (row.physicalName)\r\n                                        return <Row className=\"fl fl-spw fl-mid\">\r\n                                            <Col className=\"name-row\">{row.physicalName}</Col>\r\n                                            <Col>\r\n                                                <Row>\r\n                                                    {\r\n                                                        row.seats.map(seat => {\r\n\r\n                                                            if (arrTicketPick.includes(row.physicalName + seat.id)) {\r\n                                                                return <Col\r\n                                                                    className=\"cant-pick-seat\"\r\n                                                                    id={row.physicalName + seat.id}>{seat.id}</Col>\r\n                                                            }\r\n\r\n                                                            if (selectId.includes(row.physicalName + seat.id))\r\n                                                                return <Col\r\n                                                                    onClick={() => handleSeat(row.physicalName, seat.id)}\r\n                                                                    className=\"picked-seat\"\r\n                                                                    id={row.physicalName + seat.id}>{seat.id}</Col>\r\n                                                            else return <Col\r\n                                                                onClick={() => handleSeat(row.physicalName, seat.id)}\r\n                                                                className=\"name-seat\"\r\n                                                                id={row.physicalName + seat.id}>{seat.id}\r\n                                                            </Col>\r\n                                                        })\r\n                                                    }\r\n                                                </Row>\r\n                                            </Col>\r\n                                            <Col className=\"name-row\">{row.physicalName}</Col>\r\n                                        </Row>\r\n                                })\r\n                            }\r\n                        </Col>\r\n                    </Row>\r\n                    <div className=\"screen-block\">\r\n                        <div className=\"t-cen mt-20 fs-15\">Màn hình</div>\r\n                        <div className=\"fl fl-cen mt-5\">\r\n                            <div className=\"screen-line\"></div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"seat-note fl fl-cen mt-20\">\r\n                        <p className=\"mr-20\">\r\n                            <span className=\"bx-green\"></span><span>Ghế đang chọn</span>\r\n                        </p>\r\n                        <p className=\"mr-20\">\r\n                            <span className=\"bx-red\"></span><span> Ghế đã đặt</span>\r\n                        </p>\r\n                        <p>\r\n                            <span className=\"bx-gray\"></span><span> Ghế có thể chọn</span>\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            }\r\n        </div>\r\n    );\r\n\r\n}\r\n\r\nexport default BookSeat;\r\n"],"names":["props","useState","seatData","setSeatData","selectId","setSelectId","cpSeat","selectCpSeat","lsTicketPick","getLsTicketPick","arrTicketPick","totalTicket","getTotalTicket","useSearchParams","sessionId","get","seat","localStorage","getItem","setSeatPicking","useEffect","fetch","then","res","json","data","seatPlan","seatLayoutData","areas","tmp","Object","values","sumTicket","sum","forEach","item","coupleTicket","handleSeat","rowName","seatName","removeItem","includes","length","shift","handleSeatCouple","parentCallback","join","map","n","push","SeatCode","split","setItem","console","log","className","span","rows","row","physicalName","seats","id","onClick"],"sourceRoot":""}