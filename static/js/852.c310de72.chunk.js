"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[852],{5852:function(e,s,a){a.r(s),a.d(s,{default:function(){return h}});var c=a(3433),n=a(9439),i=a(2791),l=a(1087),t=a(9607),r=a(9603),d=a(184);var h=function(e){var s=(0,i.useState)(null),a=(0,n.Z)(s,2),h=a[0],m=a[1],o=(0,i.useState)([]),u=(0,n.Z)(o,2),p=u[0],f=u[1],N=(0,i.useState)([]),j=(0,n.Z)(N,2),x=j[0],Z=j[1],k=(0,i.useState)([]),y=(0,n.Z)(k,2),v=y[0],g=y[1],b=[],w=(0,i.useState)(0),S=(0,n.Z)(w,2),C=S[0],T=S[1],I=(0,l.lr)(),G=(0,n.Z)(I,1)[0].get("sessionId"),H=localStorage.getItem("seat"),U=(0,i.useState)([]),V=(0,n.Z)(U,2),B=(V[0],V[1]);(0,i.useEffect)((function(){fetch("https://vietcpq.name.vn/U2FsdGVkX19udsrsAUnUBsRg8K4HmweHVb4TTgSilDI=/cinema/booking/detail").then((function(e){return e.json()})).then((function(e){m(e.seatPlan.seatLayoutData.areas)}));var s=Object.values(e.sumTicket),a=0;s.forEach((function(e){a+=e})),T(a-e.coupleTicket),fetch("https://vietcpq.name.vn/U2FsdGVkX19udsrsAUnUBsRg8K4HmweHVb4TTgSilDI=/cinema/TicketByShowCode/".concat(G)).then((function(e){return e.json()})).then((function(e){return g(e)}))}),[]);var D=function(e,s){0!==C&&(localStorage.removeItem("seat"),p.includes(e+s)||(p.length<C||p.shift(),f([].concat((0,c.Z)(p),[e+s]))))},E=function(s,a){0!==e.coupleTicket&&(localStorage.removeItem("seat"),x.includes(s+a)||(x.length<2*e.coupleTicket||(x.shift(),x.shift()),Z([].concat((0,c.Z)(x),a%2===0?[s+a,s+(a-1)]:[s+a,s+(1*a+1)]))))};return e.parentCallback([].concat((0,c.Z)(p),(0,c.Z)(x)).join(", ")),v&&v.map((function(e){b.push.apply(b,(0,c.Z)(e.SeatCode.split(", ")))})),(0,i.useEffect)((function(){H||localStorage.setItem("seat",[].concat((0,c.Z)(p),(0,c.Z)(x)).join(", ")),B([].concat((0,c.Z)(p),(0,c.Z)(x))),H&&B(H.split(","))}),[p,x]),console.log(b),(0,d.jsxs)("div",{className:"book-seat",children:[(0,d.jsxs)("h2",{className:"pb-10",children:["CH\u1eccN GH\u1ebe: ",[].concat((0,c.Z)(p),(0,c.Z)(x)).join(", ")," "]}),h&&(0,d.jsxs)("div",{className:"block-seat",children:[(0,d.jsx)(t.Z,{className:"w-100 mb-20",children:(0,d.jsx)(r.Z,{span:24,children:h[1].rows.map((function(e){if(e.physicalName)return(0,d.jsxs)(t.Z,{className:"fl fl-spw fl-mid",children:[(0,d.jsx)(r.Z,{className:"name-row",children:e.physicalName}),(0,d.jsx)(r.Z,{children:(0,d.jsx)(t.Z,{children:e.seats.map((function(s){return b.includes(e.physicalName+s.id)?(0,d.jsx)(r.Z,{className:"cant-pick-seat",id:e.physicalName+s.id,children:s.id}):x.includes(e.physicalName+s.id)?(0,d.jsx)(r.Z,{onClick:function(){return E(e.physicalName,s.id)},className:"picked-seat",children:s.id}):(0,d.jsx)(r.Z,{onClick:function(){return E(e.physicalName,s.id)},className:"name-seat",children:s.id})}))})}),(0,d.jsx)(r.Z,{className:"name-row",children:e.physicalName})]})}))})}),(0,d.jsx)(t.Z,{className:"w-100",children:(0,d.jsx)(r.Z,{span:24,children:h[0].rows.map((function(e){if(e.physicalName)return(0,d.jsxs)(t.Z,{className:"fl fl-spw fl-mid",children:[(0,d.jsx)(r.Z,{className:"name-row",children:e.physicalName}),(0,d.jsx)(r.Z,{children:(0,d.jsx)(t.Z,{children:e.seats.map((function(s){return b.includes(e.physicalName+s.id)?(0,d.jsx)(r.Z,{className:"cant-pick-seat",id:e.physicalName+s.id,children:s.id}):p.includes(e.physicalName+s.id)?(0,d.jsx)(r.Z,{onClick:function(){return D(e.physicalName,s.id)},className:"picked-seat",id:e.physicalName+s.id,children:s.id}):(0,d.jsx)(r.Z,{onClick:function(){return D(e.physicalName,s.id)},className:"name-seat",id:e.physicalName+s.id,children:s.id})}))})}),(0,d.jsx)(r.Z,{className:"name-row",children:e.physicalName})]})}))})}),(0,d.jsxs)("div",{className:"screen-block",children:[(0,d.jsx)("div",{className:"t-cen mt-20 fs-15",children:"M\xe0n h\xecnh"}),(0,d.jsx)("div",{className:"fl fl-cen mt-5",children:(0,d.jsx)("div",{className:"screen-line"})})]}),(0,d.jsxs)("div",{className:"seat-note fl fl-cen mt-20",children:[(0,d.jsxs)("p",{className:"mr-20",children:[(0,d.jsx)("span",{className:"bx-green"}),(0,d.jsx)("span",{children:"Gh\u1ebf \u0111ang ch\u1ecdn"})]}),(0,d.jsxs)("p",{className:"mr-20",children:[(0,d.jsx)("span",{className:"bx-red"}),(0,d.jsx)("span",{children:" Gh\u1ebf \u0111\xe3 \u0111\u1eb7t"})]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("span",{className:"bx-gray"}),(0,d.jsx)("span",{children:" Gh\u1ebf c\xf3 th\u1ec3 ch\u1ecdn"})]})]})]})]})}}}]);
//# sourceMappingURL=852.c310de72.chunk.js.map